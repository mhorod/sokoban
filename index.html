<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200&display=swap" rel="stylesheet">
  <script type="module" src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.esm.js"></script>
  <link rel="stylesheet" href="styles/level.css" type="text/css" />
  <link rel="stylesheet" href="styles/modal.css" type="text/css" />
  <link rel="stylesheet" href="styles/menu.css" type="text/css" />
  <link rel="stylesheet" href="styles/main.css" type="text/css" />
  <link rel="shortuct icon" href="favicon.png" />
  <title>倉庫番</title>
</head>

<body>
  <main>
    <h1 id="game-title">
      Sokoban by rybka
      <ion-icon class="fish" name="fish-outline"></ion-icon>
      plum
    </h1>

    <!-- Main menu -->
    <div id="main-menu" class="menu">
      <div class="menu-buttons">
        <button class='btn' id='play-random-btn'>
          <ion-icon name="play-outline"></ion-icon>
          <span class="text"> Random level </span>
        </button>
        <button class='btn' id='play-all-levels-btn'>
          <ion-icon name="game-controller-outline"></ion-icon>
          <span class="text"> Full game </span>
        </button>

        <button class='btn' id='level-editor-btn'>
          <ion-icon name="build-outline"></ion-icon>
          <span class="text"> Level editor </span>
        </button>
      </div>

    </div>

    <!-- Module 1 menu - random level -->
    <div id="random-level-menu" class="menu">
      <button class="btn back-btn">
        <ion-icon name="arrow-back-outline"></ion-icon>
        Back to previous menu
      </button>

      <div class="menu-buttons">
        <button class='btn' id='easy-btn'>
          <ion-icon class="easy" name="remove-outline"></ion-icon>
          <span class="text"> Easy </span>
        </button>
        <button class='btn' id='medium-btn'>
          <ion-icon class="medium" name="reorder-two-outline"></ion-icon>
          <span class="text"> Medium </span>
        </button>
        <button class='btn' id='hard-btn'>
          <ion-icon class="hard" name="reorder-three-outline"></ion-icon>
          <span class="text"> Hard </span>
        </button>
      </div>
    </div>

    <!-- Module 2 menu - all levels -->
    <div id="all-levels-menu" class="menu">

      <!-- Module 2 main menu -->
      <div id="all-levels-main-menu" class="menu">
        <button class="btn back-btn">
          <ion-icon name="arrow-back-outline"></ion-icon>
          Back to previous menu
        </button>

        <div class="menu-buttons">
          <button class='btn' id="continue-btn">
            <ion-icon name="play-outline"></ion-icon>
            <span class="text"> Continue </span>
          </button>
          <button class='btn' id="new-game-btn">
            <ion-icon name="add-outline"></ion-icon>
            <span class="text"> New Game </span>
          </button>
          <button class='btn' id="ranking-btn">
            <ion-icon name="podium-outline"></ion-icon>
            <span class="text"> Ranking </span>
          </button>
        </div>
      </div>

      <!-- New game menu -->
      <div id="new-game-menu" class="menu">
        <button class='btn back-btn'>
          <ion-icon name="arrow-back-outline"></ion-icon>
          <span class="text">Back to previous menu </span>
        </button>

        <h2 class="menu-title"> New game </h2>

        <div style="padding: 10px">
          Enter name: <input type="text" id="game-name-input" style="width:100px" maxlength="10" />
          <br>
          <div class="error" id="game-name-error"></div>
        </div>

        <div class="menu-buttons">
          <button class='btn' id="play-new-game-btn">
            <ion-icon name="play-outline"></ion-icon>
            <span class="text"> Play </span>
          </button>
        </div>
      </div>

      <!-- Continue game menu -->
      <div id="continue-game-menu" class="menu">
        <button class="btn back-btn">
          <ion-icon name="arrow-back-outline"></ion-icon>
          Back to previous menu
        </button>

        <h2 class="menu-title"> Saved games </h2>
        <button class='btn back-btn' style="display:none">
          <ion-icon name="arrow-back-outline"></ion-icon>
          <span class="text">Back to previous menu </span>
        </button>

        <div class="level-preview-outer-wrapper">
          <div class="level-preview-wrapper">
            <div class="level-preview">
            </div>
          </div>
        </div>

        <div class="menu-buttons">
        </div>
      </div>
    </div> <!-- End of Module 2 menu -->

    <!-- Ranking -->
    <div id="ranking-wrapper" class="modal-wrapper">
      <div id="ranking-modal" class="modal">
        <button class='btn' id="close-ranking-btn">
          <ion-icon name="close-outline"></ion-icon>
        </button>

        <h2 class="ranking-text">Ranking </h2>
        <div id="ranking"></div>
      </div>
    </div>


    <!-- Module 3 menu - level editor -->
    <div id="level-editor-menu" class="menu">

      <div id="level-editor-main-menu" class="menu">
        <button class="btn back-btn">
          <ion-icon name="arrow-back-outline"></ion-icon>
          Back to previous menu
        </button>

        <h2 class="menu-title"> Level editor </h2>
        <div class="menu-buttons">
          <button class='btn' id='level-editor-play-btn'>
            <ion-icon name="play-outline"></ion-icon>
            <span class="text"> Play </span>
          </button>
          <button class='btn' id='level-editor-edit-btn'>
            <ion-icon name="build-outline"></ion-icon>
            <span class="text"> Edit </span>
          </button>
          <button id="add-new-level-btn" class="btn">
            <ion-icon name="add-outline"></ion-icon>
            <span class="text">Add new level</span>
          </button>
        </div>
      </div>

      <div id="level-editor-play-menu" class="menu">
        <button class="btn back-btn">
          <ion-icon name="arrow-back-outline"></ion-icon>
          Back to previous menu
        </button>

        <h2 class="menu-title"> Play saved levels </h2>
        <button class='btn back-btn' style="display:none">
          <ion-icon name="arrow-back-outline"></ion-icon>
          <span class="text">Back to previous menu </span>
        </button>

        <div class="level-preview-outer-wrapper">
          <div class="level-preview-wrapper">
            <div class="level-preview">
            </div>
          </div>
        </div>

        <div class="menu-buttons">
        </div>
      </div>

      <div id="level-editor-edit-menu" class="menu">
        <button class="btn back-btn">
          <ion-icon name="arrow-back-outline"></ion-icon>
          Back to previous menu
        </button>

        <h2 class="menu-title"> Edit saved levels </h2>

        <div class="level-preview-outer-wrapper">
          <div class="level-preview-wrapper">
            <div class="level-preview">
            </div>
          </div>
        </div>

        <div class="menu-buttons">
        </div>
      </div>



    </div> <!-- End of Module 3 menu -->


    <!-- Game -->
    <div id="game-wrapper" class="hidden">
      <button class="btn back-btn">
        <ion-icon name="arrow-back-outline"></ion-icon>
        Back to main menu
      </button>
      <div class="level-ui-wrapper">

      </div>
    </div>

    <div class='modal-wrapper' id="level-completed-wrapper">
      <div class="modal" id="level-completed-modal">
        <h2> Level completed </h2>
        <button class="btn" id="level-completed-continue-btn">
          Continue
        </button>
      </div>
    </div> <!-- End of game -->

    <!-- Game finished modal -->
    <div class='modal-wrapper' id="game-finished-wrapper">
      <div class="modal" id="game-finished-modal">
        <h3> Game finished </h3>
        <h4 id="finished-game-score"> </h4>
        <h5> Your game was finished and saved in ranking </h5>
        <div class="button-row">
          <button class="btn" id="game-finished-continue-btn">
            Continue
          </button>
          <button class="btn" id="game-finished-view-ranking-btn">
            View ranking
          </button>
        </div>
      </div>
    </div>

    <!-- Level editor -->
    <div id="level-editor-wrapper" class="hidden">
      <div id="edited-level-play" class="menu">
        <button class="btn back-btn">
          <ion-icon name="arrow-back-outline"></ion-icon>
          Back to editing
        </button>

        <h2 class="menu-title"> Edit Level </h2>
        <div class="level-ui-wrapper"></div>
      </div>

      <div id="level-editor">
        <button class="btn back-btn">
          <ion-icon name="arrow-back-outline"></ion-icon>
          Back to previous menu
        </button>

        <h2 class="menu-title"> Edit Level </h2>

        <div class="error" id="edited-level-error"> </div>
        <div class="success" id="saved-edited-level"> Saved level </div>

        <div style="padding: 10px">
          Level name: <input type="text" id="level-name-input" style="width:100px" maxlength="10" />
        </div>
        <div id="level-size">
          Level size:
          <input type="text" id="level-width" maxlength="2" /> x
          <input type="text" id="level-height" maxlength="2" />
          <button class="btn" id="resize-level-btn"> Resize </button>
        </div>


        <div id="edited-level-wrapper"></div>

        <div class="button-row" id="mode-buttons">
          <button class="btn active" id="place-btn"> Place </button>
          <button class="btn" id="erase-btn"> Erase </button>
        </div>
        <div class="button-row" id="element-buttons">
          <button class="btn active" id="floor-btn">
            Floor
          </button>

          <button class="btn" id="target-btn">
            Target
          </button>

          <button class="btn" id="box-btn">
            Box
          </button>

          <button class="btn" id="player-btn">
            Player
          </button>

        </div>
        <div class="button-row">
          <button class="btn" id="play-edited-level-btn">
            <ion-icon name="play-outline"></ion-icon>
            <span class="text"> Play </span>
          </button>
          <button class="btn" id="save-level-btn">
            <ion-icon name="save-outline"></ion-icon>
            <span class="text"> Save level </span>
          </button>
          <button class="btn warning" id="remove-level-btn">
            <ion-icon name="trash-outline"></ion-icon>
            <span class="text"> Remove level </span>
          </button>
        </div>

      </div>

    </div>

    <div id="cookies-popup">
      <span id="cookies-message"> Our game uses cookies to store levels and game state. </span>
      <button class='btn' id="accept-cookies-btn"> Ok </button>
    </div>

    <audio id="game-music" volume="0.5" loop="true">
      <source src="sounds/music.mp3" type='audio/mpeg'>
    </audio>

    <div id="volume-switch">
      <script src="scripts/audio.js"></script>
      <button class="btn" onclick="mute_game_music()">
        <ion-icon name="volume-high-outline"></ion-icon>
      </button>
      <button class="btn hidden" onclick="unmute_game_music()">
        <ion-icon name="volume-mute-outline"></ion-icon>
      </button>
    </div>

  </main>

  <div id="testing" style="display: none;">
    <button class="btn" onclick="run_all_tests"> Run all tests </button>
    <div id="test-results"></div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>

  <!-- Menus -->
  <script src="scripts/main_menu.js"></script>
  <script src="scripts/random_level_menu.js"></script>
  <script src="scripts/all_levels_menu.js"></script>
  <script src="scripts/level_editor_menu.js"></script>

  <!-- Levels -->
  <script src="scripts/levels.js"></script>
  <script src="scripts/level.js"></script>
  <script src="scripts/load_levels.js"></script>
  <script src="scripts/load_and_save.js"> </script>

  <!-- Logic -->
  <script src="scripts/game_logic.js"></script>

  <!-- Interactor -->
  <script src="scripts/movement_controls.js"></script>
  <script src="scripts/drawing.js"></script>
  <script src="scripts/level_editor.js"></script>
  <script src="scripts/game_state.js"></script>
  <script src="scripts/game.js"></script>


  <!-- Tests -->
  <script src="tests/testing.js"></script>
  <script src="tests/level.js"></script>
  <script src="tests/game_logic.js"></script>
  <script src="tests/game_state.js"></script>
  <script src="tests/load_and_save.js"></script>


  <script src="scripts/main.js"></script>
</body>